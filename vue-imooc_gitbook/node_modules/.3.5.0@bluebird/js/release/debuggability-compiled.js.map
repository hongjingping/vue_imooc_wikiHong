{"version":3,"sources":["../../../typings/node_modules/bluebird/js/release/debuggability.js"],"names":[],"mappings":"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","file":"debuggability-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = require(\"./errors\").Warning;\nvar util = require(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (false ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n"]}