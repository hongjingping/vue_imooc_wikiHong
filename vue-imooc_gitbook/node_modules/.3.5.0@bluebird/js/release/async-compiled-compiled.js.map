{"version":3,"sources":["async-compiled.js"],"names":[],"mappings":"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","file":"async-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nvar firstLineError;\ntry {\n    throw new Error();\n} catch (e) {\n    firstLineError = e;\n}\nvar schedule = require(\"./schedule\");\nvar Queue = require(\"./queue\");\nvar util = require(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function (fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function () {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function () {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function () {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\nAsync.prototype.fatalError = function (e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) + \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function (fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () {\n            throw arg;\n        };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function () {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function () {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function () {\n                setTimeout(function () {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function () {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function (promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function () {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function (queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n//# sourceMappingURL=async-compiled.js.map"]}