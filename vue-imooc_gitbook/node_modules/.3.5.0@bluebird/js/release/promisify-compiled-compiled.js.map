{"version":3,"sources":["promisify-compiled.js"],"names":[],"mappings":"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","file":"promisify-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nmodule.exports = function (Promise, INTERNAL) {\n    var THIS = {};\n    var util = require(\"./util\");\n    var nodebackForPromise = require(\"./nodeback\");\n    var withAppended = util.withAppended;\n    var maybeWrapAsError = util.maybeWrapAsError;\n    var canEvaluate = util.canEvaluate;\n    var TypeError = require(\"./errors\").TypeError;\n    var defaultSuffix = \"Async\";\n    var defaultPromisified = { __isPromisified__: true };\n    var noCopyProps = [\"arity\", \"length\", \"name\", \"arguments\", \"caller\", \"callee\", \"prototype\", \"__isPromisified__\"];\n    var noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\n    var defaultFilter = function (name) {\n        return util.isIdentifier(name) && name.charAt(0) !== \"_\" && name !== \"constructor\";\n    };\n\n    function propsFilter(key) {\n        return !noCopyPropsPattern.test(key);\n    }\n\n    function isPromisified(fn) {\n        try {\n            return fn.__isPromisified__ === true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function hasPromisified(obj, key, suffix) {\n        var val = util.getDataPropertyOrDefault(obj, key + suffix, defaultPromisified);\n        return val ? isPromisified(val) : false;\n    }\n    function checkValid(ret, suffix, suffixRegexp) {\n        for (var i = 0; i < ret.length; i += 2) {\n            var key = ret[i];\n            if (suffixRegexp.test(key)) {\n                var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n                for (var j = 0; j < ret.length; j += 2) {\n                    if (ret[j] === keyWithoutAsyncSuffix) {\n                        throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\".replace(\"%s\", suffix));\n                    }\n                }\n            }\n        }\n    }\n\n    function promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n        var keys = util.inheritedDataKeys(obj);\n        var ret = [];\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            var value = obj[key];\n            var passesDefaultFilter = filter === defaultFilter ? true : defaultFilter(key, value, obj);\n            if (typeof value === \"function\" && !isPromisified(value) && !hasPromisified(obj, key, suffix) && filter(key, value, obj, passesDefaultFilter)) {\n                ret.push(key, value);\n            }\n        }\n        checkValid(ret, suffix, suffixRegexp);\n        return ret;\n    }\n\n    var escapeIdentRegex = function (str) {\n        return str.replace(/([$])/, \"\\\\$\");\n    };\n\n    var makeNodePromisifiedEval;\n    if (!false) {\n        var switchCaseArgumentOrder = function (likelyArgumentCount) {\n            var ret = [likelyArgumentCount];\n            var min = Math.max(0, likelyArgumentCount - 1 - 3);\n            for (var i = likelyArgumentCount - 1; i >= min; --i) {\n                ret.push(i);\n            }\n            for (var i = likelyArgumentCount + 1; i <= 3; ++i) {\n                ret.push(i);\n            }\n            return ret;\n        };\n\n        var argumentSequence = function (argumentCount) {\n            return util.filledRange(argumentCount, \"_arg\", \"\");\n        };\n\n        var parameterDeclaration = function (parameterCount) {\n            return util.filledRange(Math.max(parameterCount, 3), \"_arg\", \"\");\n        };\n\n        var parameterCount = function (fn) {\n            if (typeof fn.length === \"number\") {\n                return Math.max(Math.min(fn.length, 1023 + 1), 0);\n            }\n            return 0;\n        };\n\n        makeNodePromisifiedEval = function (callback, receiver, originalName, fn, _, multiArgs) {\n            var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n            var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n            var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n            function generateCallForArgumentCount(count) {\n                var args = argumentSequence(count).join(\", \");\n                var comma = count > 0 ? \", \" : \"\";\n                var ret;\n                if (shouldProxyThis) {\n                    ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n                } else {\n                    ret = receiver === undefined ? \"ret = callback({{args}}, nodeback); break;\\n\" : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n                }\n                return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n            }\n\n            function generateArgumentSwitchCase() {\n                var ret = \"\";\n                for (var i = 0; i < argumentOrder.length; ++i) {\n                    ret += \"case \" + argumentOrder[i] + \":\" + generateCallForArgumentCount(argumentOrder[i]);\n                }\n\n                ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", shouldProxyThis ? \"ret = callback.apply(this, args);\\n\" : \"ret = callback.apply(receiver, args);\\n\");\n                return ret;\n            }\n\n            var getFunctionCode = typeof callback === \"string\" ? \"this != null ? this['\" + callback + \"'] : fn\" : \"fn\";\n            var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase()).replace(\"[GetFunctionCode]\", getFunctionCode);\n            body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n            return new Function(\"Promise\", \"fn\", \"receiver\", \"withAppended\", \"maybeWrapAsError\", \"nodebackForPromise\", \"tryCatch\", \"errorObj\", \"notEnumerableProp\", \"INTERNAL\", body)(Promise, fn, receiver, withAppended, maybeWrapAsError, nodebackForPromise, util.tryCatch, util.errorObj, util.notEnumerableProp, INTERNAL);\n        };\n    }\n\n    function makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n        var defaultThis = function () {\n            return this;\n        }();\n        var method = callback;\n        if (typeof method === \"string\") {\n            callback = fn;\n        }\n        function promisified() {\n            var _receiver = receiver;\n            if (receiver === THIS) _receiver = this;\n            var promise = new Promise(INTERNAL);\n            promise._captureStackTrace();\n            var cb = typeof method === \"string\" && this !== defaultThis ? this[method] : callback;\n            var fn = nodebackForPromise(promise, multiArgs);\n            try {\n                cb.apply(_receiver, withAppended(arguments, fn));\n            } catch (e) {\n                promise._rejectCallback(maybeWrapAsError(e), true, true);\n            }\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n            return promise;\n        }\n        util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n        return promisified;\n    }\n\n    var makeNodePromisified = canEvaluate ? makeNodePromisifiedEval : makeNodePromisifiedClosure;\n\n    function promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n        var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n        var methods = promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n        for (var i = 0, len = methods.length; i < len; i += 2) {\n            var key = methods[i];\n            var fn = methods[i + 1];\n            var promisifiedKey = key + suffix;\n            if (promisifier === makeNodePromisified) {\n                obj[promisifiedKey] = makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n            } else {\n                var promisified = promisifier(fn, function () {\n                    return makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n                });\n                util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n                obj[promisifiedKey] = promisified;\n            }\n        }\n        util.toFastProperties(obj);\n        return obj;\n    }\n\n    function promisify(callback, receiver, multiArgs) {\n        return makeNodePromisified(callback, receiver, undefined, callback, null, multiArgs);\n    }\n\n    Promise.promisify = function (fn, options) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n        }\n        if (isPromisified(fn)) {\n            return fn;\n        }\n        options = Object(options);\n        var receiver = options.context === undefined ? THIS : options.context;\n        var multiArgs = !!options.multiArgs;\n        var ret = promisify(fn, receiver, multiArgs);\n        util.copyDescriptors(fn, ret, propsFilter);\n        return ret;\n    };\n\n    Promise.promisifyAll = function (target, options) {\n        if (typeof target !== \"function\" && typeof target !== \"object\") {\n            throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n        }\n        options = Object(options);\n        var multiArgs = !!options.multiArgs;\n        var suffix = options.suffix;\n        if (typeof suffix !== \"string\") suffix = defaultSuffix;\n        var filter = options.filter;\n        if (typeof filter !== \"function\") filter = defaultFilter;\n        var promisifier = options.promisifier;\n        if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n        if (!util.isIdentifier(suffix)) {\n            throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n        }\n\n        var keys = util.inheritedDataKeys(target);\n        for (var i = 0; i < keys.length; ++i) {\n            var value = target[keys[i]];\n            if (keys[i] !== \"constructor\" && util.isClass(value)) {\n                promisifyAll(value.prototype, suffix, filter, promisifier, multiArgs);\n                promisifyAll(value, suffix, filter, promisifier, multiArgs);\n            }\n        }\n\n        return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n    };\n};\n\n//# sourceMappingURL=promisify-compiled.js.map"]}