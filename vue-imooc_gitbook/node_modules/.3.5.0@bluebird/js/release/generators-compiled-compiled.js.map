{"version":3,"sources":["generators-compiled.js"],"names":[],"mappings":"AAAA;;AAEA,OAAO,OAAP,GAAiB,UAAU,OAAV,EAAmB,YAAnB,EAAiC,QAAjC,EAA2C,mBAA3C,EAAgE,SAAhE,EAA2E,KAA3E,EAAkF;AAC/F,QAAI,SAAS,QAAQ,UAAR,CAAb;AACA,QAAI,YAAY,OAAO,SAAvB;AACA,QAAI,OAAO,QAAQ,QAAR,CAAX;AACA,QAAI,WAAW,KAAK,QAApB;AACA,QAAI,WAAW,KAAK,QAApB;AACA,QAAI,gBAAgB,EAApB;;AAEA,aAAS,uBAAT,CAAiC,KAAjC,EAAwC,aAAxC,EAAuD,WAAvD,EAAoE;AAChE,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,cAAc,MAAlC,EAA0C,EAAE,CAA5C,EAA+C;AAC3C,wBAAY,YAAZ;AACA,gBAAI,SAAS,SAAS,cAAc,CAAd,CAAT,EAA2B,KAA3B,CAAb;AACA,wBAAY,WAAZ;AACA,gBAAI,WAAW,QAAf,EAAyB;AACrB,4BAAY,YAAZ;AACA,oBAAI,MAAM,QAAQ,MAAR,CAAe,SAAS,CAAxB,CAAV;AACA,4BAAY,WAAZ;AACA,uBAAO,GAAP;AACH;AACD,gBAAI,eAAe,oBAAoB,MAApB,EAA4B,WAA5B,CAAnB;AACA,gBAAI,wBAAwB,OAA5B,EAAqC,OAAO,YAAP;AACxC;AACD,eAAO,IAAP;AACH;;AAED,aAAS,YAAT,CAAsB,iBAAtB,EAAyC,QAAzC,EAAmD,YAAnD,EAAiE,KAAjE,EAAwE;AACpE,YAAI,MAAM,YAAN,EAAJ,EAA0B;AACtB,gBAAI,WAAW,IAAI,OAAJ,CAAY,QAAZ,CAAf;AACA,gBAAI,kBAAkB,KAAK,eAAL,GAAuB,IAAI,OAAJ,CAAY,QAAZ,CAA7C;AACA,iBAAK,QAAL,GAAgB,SAAS,MAAT,CAAgB,YAAY;AACxC,uBAAO,eAAP;AACH,aAFe,CAAhB;AAGA,qBAAS,kBAAT;AACA,qBAAS,YAAT,CAAsB,IAAtB;AACH,SARD,MAQO;AACH,gBAAI,UAAU,KAAK,QAAL,GAAgB,IAAI,OAAJ,CAAY,QAAZ,CAA9B;AACA,oBAAQ,kBAAR;AACH;AACD,aAAK,MAAL,GAAc,KAAd;AACA,aAAK,kBAAL,GAA0B,iBAA1B;AACA,aAAK,SAAL,GAAiB,QAAjB;AACA,aAAK,UAAL,GAAkB,SAAlB;AACA,aAAK,cAAL,GAAsB,OAAO,YAAP,KAAwB,UAAxB,GAAqC,CAAC,YAAD,EAAe,MAAf,CAAsB,aAAtB,CAArC,GAA4E,aAAlG;AACA,aAAK,eAAL,GAAuB,IAAvB;AACA,aAAK,kBAAL,GAA0B,KAA1B;AACH;AACD,SAAK,QAAL,CAAc,YAAd,EAA4B,SAA5B;;AAEA,iBAAa,SAAb,CAAuB,WAAvB,GAAqC,YAAY;AAC7C,eAAO,KAAK,QAAL,KAAkB,IAAzB;AACH,KAFD;;AAIA,iBAAa,SAAb,CAAuB,QAAvB,GAAkC,YAAY;AAC1C,aAAK,QAAL,GAAgB,KAAK,UAAL,GAAkB,IAAlC;AACA,YAAI,MAAM,YAAN,MAAwB,KAAK,eAAL,KAAyB,IAArD,EAA2D;AACvD,iBAAK,eAAL,CAAqB,QAArB;AACA,iBAAK,eAAL,GAAuB,IAAvB;AACH;AACJ,KAND;;AAQA,iBAAa,SAAb,CAAuB,iBAAvB,GAA2C,YAAY;AACnD,YAAI,KAAK,WAAL,EAAJ,EAAwB;AACxB,YAAI,mBAAmB,OAAO,KAAK,UAAL,CAAgB,QAAhB,CAAP,KAAqC,WAA5D;;AAEA,YAAI,MAAJ;AACA,YAAI,CAAC,gBAAL,EAAuB;AACnB,gBAAI,SAAS,IAAI,QAAQ,iBAAZ,CAA8B,8BAA9B,CAAb;AACA,oBAAQ,SAAR,CAAkB,cAAlB,GAAmC,MAAnC;AACA,iBAAK,QAAL,CAAc,iBAAd,CAAgC,MAAhC;AACA,iBAAK,QAAL,CAAc,YAAd;AACA,qBAAS,SAAS,KAAK,UAAL,CAAgB,OAAhB,CAAT,EAAmC,IAAnC,CAAwC,KAAK,UAA7C,EAAyD,MAAzD,CAAT;AACA,iBAAK,QAAL,CAAc,WAAd;AACH,SAPD,MAOO;AACH,iBAAK,QAAL,CAAc,YAAd;AACA,qBAAS,SAAS,KAAK,UAAL,CAAgB,QAAhB,CAAT,EAAoC,IAApC,CAAyC,KAAK,UAA9C,EAA0D,SAA1D,CAAT;AACA,iBAAK,QAAL,CAAc,WAAd;AACH;AACD,aAAK,kBAAL,GAA0B,IAA1B;AACA,aAAK,eAAL,GAAuB,IAAvB;AACA,aAAK,SAAL,CAAe,MAAf;AACH,KApBD;;AAsBA,iBAAa,SAAb,CAAuB,iBAAvB,GAA2C,UAAU,KAAV,EAAiB;AACxD,aAAK,eAAL,GAAuB,IAAvB;AACA,aAAK,QAAL,CAAc,YAAd;AACA,YAAI,SAAS,SAAS,KAAK,UAAL,CAAgB,IAAzB,EAA+B,IAA/B,CAAoC,KAAK,UAAzC,EAAqD,KAArD,CAAb;AACA,aAAK,QAAL,CAAc,WAAd;AACA,aAAK,SAAL,CAAe,MAAf;AACH,KAND;;AAQA,iBAAa,SAAb,CAAuB,gBAAvB,GAA0C,UAAU,MAAV,EAAkB;AACxD,aAAK,eAAL,GAAuB,IAAvB;AACA,aAAK,QAAL,CAAc,iBAAd,CAAgC,MAAhC;AACA,aAAK,QAAL,CAAc,YAAd;AACA,YAAI,SAAS,SAAS,KAAK,UAAL,CAAgB,OAAhB,CAAT,EAAmC,IAAnC,CAAwC,KAAK,UAA7C,EAAyD,MAAzD,CAAb;AACA,aAAK,QAAL,CAAc,WAAd;AACA,aAAK,SAAL,CAAe,MAAf;AACH,KAPD;;AASA,iBAAa,SAAb,CAAuB,gBAAvB,GAA0C,YAAY;AAClD,YAAI,KAAK,eAAL,YAAgC,OAApC,EAA6C;AACzC,gBAAI,UAAU,KAAK,eAAnB;AACA,iBAAK,eAAL,GAAuB,IAAvB;AACA,oBAAQ,MAAR;AACH;AACJ,KAND;;AAQA,iBAAa,SAAb,CAAuB,OAAvB,GAAiC,YAAY;AACzC,eAAO,KAAK,QAAZ;AACH,KAFD;;AAIA,iBAAa,SAAb,CAAuB,IAAvB,GAA8B,YAAY;AACtC,aAAK,UAAL,GAAkB,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,KAAK,SAAlC,CAAlB;AACA,aAAK,SAAL,GAAiB,KAAK,kBAAL,GAA0B,SAA3C;AACA,aAAK,iBAAL,CAAuB,SAAvB;AACH,KAJD;;AAMA,iBAAa,SAAb,CAAuB,SAAvB,GAAmC,UAAU,MAAV,EAAkB;AACjD,YAAI,UAAU,KAAK,QAAnB;AACA,YAAI,WAAW,QAAf,EAAyB;AACrB,iBAAK,QAAL;AACA,gBAAI,KAAK,kBAAT,EAA6B;AACzB,uBAAO,QAAQ,MAAR,EAAP;AACH,aAFD,MAEO;AACH,uBAAO,QAAQ,eAAR,CAAwB,OAAO,CAA/B,EAAkC,KAAlC,CAAP;AACH;AACJ;;AAED,YAAI,QAAQ,OAAO,KAAnB;AACA,YAAI,OAAO,IAAP,KAAgB,IAApB,EAA0B;AACtB,iBAAK,QAAL;AACA,gBAAI,KAAK,kBAAT,EAA6B;AACzB,uBAAO,QAAQ,MAAR,EAAP;AACH,aAFD,MAEO;AACH,uBAAO,QAAQ,gBAAR,CAAyB,KAAzB,CAAP;AACH;AACJ,SAPD,MAOO;AACH,gBAAI,eAAe,oBAAoB,KAApB,EAA2B,KAAK,QAAhC,CAAnB;AACA,gBAAI,EAAE,wBAAwB,OAA1B,CAAJ,EAAwC;AACpC,+BAAe,wBAAwB,YAAxB,EAAsC,KAAK,cAA3C,EAA2D,KAAK,QAAhE,CAAf;AACA,oBAAI,iBAAiB,IAArB,EAA2B;AACvB,yBAAK,gBAAL,CAAsB,IAAI,SAAJ,CAAc,oHAAoH,OAApH,CAA4H,IAA5H,EAAkI,OAAO,KAAP,CAAlI,IAAmJ,uBAAnJ,GAA6K,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,EAAwB,KAAxB,CAA8B,CAA9B,EAAiC,CAAC,CAAlC,EAAqC,IAArC,CAA0C,IAA1C,CAA3L,CAAtB;AACA;AACH;AACJ;AACD,2BAAe,aAAa,OAAb,EAAf;AACA,gBAAI,WAAW,aAAa,SAA5B;AACA;AACA,gBAAI,CAAC,WAAW,QAAZ,MAA0B,CAA9B,EAAiC;AAC7B,qBAAK,eAAL,GAAuB,YAAvB;AACA,6BAAa,MAAb,CAAoB,IAApB,EAA0B,IAA1B;AACH,aAHD,MAGO,IAAI,CAAC,WAAW,QAAZ,MAA0B,CAA9B,EAAiC;AACpC,wBAAQ,MAAR,CAAe,MAAf,CAAsB,KAAK,iBAA3B,EAA8C,IAA9C,EAAoD,aAAa,MAAb,EAApD;AACH,aAFM,MAEA,IAAI,CAAC,WAAW,QAAZ,MAA0B,CAA9B,EAAiC;AACpC,wBAAQ,MAAR,CAAe,MAAf,CAAsB,KAAK,gBAA3B,EAA6C,IAA7C,EAAmD,aAAa,OAAb,EAAnD;AACH,aAFM,MAEA;AACH,qBAAK,iBAAL;AACH;AACJ;AACJ,KA1CD;;AA4CA,YAAQ,SAAR,GAAoB,UAAU,iBAAV,EAA6B,OAA7B,EAAsC;AACtD,YAAI,OAAO,iBAAP,KAA6B,UAAjC,EAA6C;AACzC,kBAAM,IAAI,SAAJ,CAAc,oFAAd,CAAN;AACH;AACD,YAAI,eAAe,OAAO,OAAP,EAAgB,YAAnC;AACA,YAAI,gBAAgB,YAApB;AACA,YAAI,QAAQ,IAAI,KAAJ,GAAY,KAAxB;AACA,eAAO,YAAY;AACf,gBAAI,YAAY,kBAAkB,KAAlB,CAAwB,IAAxB,EAA8B,SAA9B,CAAhB;AACA,gBAAI,QAAQ,IAAI,aAAJ,CAAkB,SAAlB,EAA6B,SAA7B,EAAwC,YAAxC,EAAsD,KAAtD,CAAZ;AACA,gBAAI,MAAM,MAAM,OAAN,EAAV;AACA,kBAAM,UAAN,GAAmB,SAAnB;AACA,kBAAM,iBAAN,CAAwB,SAAxB;AACA,mBAAO,GAAP;AACH,SAPD;AAQH,KAfD;;AAiBA,YAAQ,SAAR,CAAkB,eAAlB,GAAoC,UAAU,EAAV,EAAc;AAC9C,YAAI,OAAO,EAAP,KAAc,UAAlB,EAA8B;AAC1B,kBAAM,IAAI,SAAJ,CAAc,kCAAkC,KAAK,WAAL,CAAiB,EAAjB,CAAhD,CAAN;AACH;AACD,sBAAc,IAAd,CAAmB,EAAnB;AACH,KALD;;AAOA,YAAQ,KAAR,GAAgB,UAAU,iBAAV,EAA6B;AACzC,cAAM,UAAN,CAAiB,iBAAjB,EAAoC,qBAApC;AACA,YAAI,OAAO,iBAAP,KAA6B,UAAjC,EAA6C;AACzC,mBAAO,aAAa,oFAAb,CAAP;AACH;AACD,YAAI,QAAQ,IAAI,YAAJ,CAAiB,iBAAjB,EAAoC,IAApC,CAAZ;AACA,YAAI,MAAM,MAAM,OAAN,EAAV;AACA,cAAM,IAAN,CAAW,QAAQ,KAAnB;AACA,eAAO,GAAP;AACH,KATD;AAUH,CAnMD;;AAqMA","file":"generators-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nmodule.exports = function (Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug) {\n    var errors = require(\"./errors\");\n    var TypeError = errors.TypeError;\n    var util = require(\"./util\");\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var yieldHandlers = [];\n\n    function promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n        for (var i = 0; i < yieldHandlers.length; ++i) {\n            traceParent._pushContext();\n            var result = tryCatch(yieldHandlers[i])(value);\n            traceParent._popContext();\n            if (result === errorObj) {\n                traceParent._pushContext();\n                var ret = Promise.reject(errorObj.e);\n                traceParent._popContext();\n                return ret;\n            }\n            var maybePromise = tryConvertToPromise(result, traceParent);\n            if (maybePromise instanceof Promise) return maybePromise;\n        }\n        return null;\n    }\n\n    function PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n        if (debug.cancellation()) {\n            var internal = new Promise(INTERNAL);\n            var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n            this._promise = internal.lastly(function () {\n                return _finallyPromise;\n            });\n            internal._captureStackTrace();\n            internal._setOnCancel(this);\n        } else {\n            var promise = this._promise = new Promise(INTERNAL);\n            promise._captureStackTrace();\n        }\n        this._stack = stack;\n        this._generatorFunction = generatorFunction;\n        this._receiver = receiver;\n        this._generator = undefined;\n        this._yieldHandlers = typeof yieldHandler === \"function\" ? [yieldHandler].concat(yieldHandlers) : yieldHandlers;\n        this._yieldedPromise = null;\n        this._cancellationPhase = false;\n    }\n    util.inherits(PromiseSpawn, Proxyable);\n\n    PromiseSpawn.prototype._isResolved = function () {\n        return this._promise === null;\n    };\n\n    PromiseSpawn.prototype._cleanup = function () {\n        this._promise = this._generator = null;\n        if (debug.cancellation() && this._finallyPromise !== null) {\n            this._finallyPromise._fulfill();\n            this._finallyPromise = null;\n        }\n    };\n\n    PromiseSpawn.prototype._promiseCancelled = function () {\n        if (this._isResolved()) return;\n        var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n        var result;\n        if (!implementsReturn) {\n            var reason = new Promise.CancellationError(\"generator .return() sentinel\");\n            Promise.coroutine.returnSentinel = reason;\n            this._promise._attachExtraTrace(reason);\n            this._promise._pushContext();\n            result = tryCatch(this._generator[\"throw\"]).call(this._generator, reason);\n            this._promise._popContext();\n        } else {\n            this._promise._pushContext();\n            result = tryCatch(this._generator[\"return\"]).call(this._generator, undefined);\n            this._promise._popContext();\n        }\n        this._cancellationPhase = true;\n        this._yieldedPromise = null;\n        this._continue(result);\n    };\n\n    PromiseSpawn.prototype._promiseFulfilled = function (value) {\n        this._yieldedPromise = null;\n        this._promise._pushContext();\n        var result = tryCatch(this._generator.next).call(this._generator, value);\n        this._promise._popContext();\n        this._continue(result);\n    };\n\n    PromiseSpawn.prototype._promiseRejected = function (reason) {\n        this._yieldedPromise = null;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        var result = tryCatch(this._generator[\"throw\"]).call(this._generator, reason);\n        this._promise._popContext();\n        this._continue(result);\n    };\n\n    PromiseSpawn.prototype._resultCancelled = function () {\n        if (this._yieldedPromise instanceof Promise) {\n            var promise = this._yieldedPromise;\n            this._yieldedPromise = null;\n            promise.cancel();\n        }\n    };\n\n    PromiseSpawn.prototype.promise = function () {\n        return this._promise;\n    };\n\n    PromiseSpawn.prototype._run = function () {\n        this._generator = this._generatorFunction.call(this._receiver);\n        this._receiver = this._generatorFunction = undefined;\n        this._promiseFulfilled(undefined);\n    };\n\n    PromiseSpawn.prototype._continue = function (result) {\n        var promise = this._promise;\n        if (result === errorObj) {\n            this._cleanup();\n            if (this._cancellationPhase) {\n                return promise.cancel();\n            } else {\n                return promise._rejectCallback(result.e, false);\n            }\n        }\n\n        var value = result.value;\n        if (result.done === true) {\n            this._cleanup();\n            if (this._cancellationPhase) {\n                return promise.cancel();\n            } else {\n                return promise._resolveCallback(value);\n            }\n        } else {\n            var maybePromise = tryConvertToPromise(value, this._promise);\n            if (!(maybePromise instanceof Promise)) {\n                maybePromise = promiseFromYieldHandler(maybePromise, this._yieldHandlers, this._promise);\n                if (maybePromise === null) {\n                    this._promiseRejected(new TypeError(\"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) + \"From coroutine:\\u000a\" + this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")));\n                    return;\n                }\n            }\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if ((bitField & 50397184) === 0) {\n                this._yieldedPromise = maybePromise;\n                maybePromise._proxy(this, null);\n            } else if ((bitField & 33554432) !== 0) {\n                Promise._async.invoke(this._promiseFulfilled, this, maybePromise._value());\n            } else if ((bitField & 16777216) !== 0) {\n                Promise._async.invoke(this._promiseRejected, this, maybePromise._reason());\n            } else {\n                this._promiseCancelled();\n            }\n        }\n    };\n\n    Promise.coroutine = function (generatorFunction, options) {\n        if (typeof generatorFunction !== \"function\") {\n            throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n        }\n        var yieldHandler = Object(options).yieldHandler;\n        var PromiseSpawn$ = PromiseSpawn;\n        var stack = new Error().stack;\n        return function () {\n            var generator = generatorFunction.apply(this, arguments);\n            var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler, stack);\n            var ret = spawn.promise();\n            spawn._generator = generator;\n            spawn._promiseFulfilled(undefined);\n            return ret;\n        };\n    };\n\n    Promise.coroutine.addYieldHandler = function (fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n        }\n        yieldHandlers.push(fn);\n    };\n\n    Promise.spawn = function (generatorFunction) {\n        debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n        if (typeof generatorFunction !== \"function\") {\n            return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n        }\n        var spawn = new PromiseSpawn(generatorFunction, this);\n        var ret = spawn.promise();\n        spawn._run(Promise.spawn);\n        return ret;\n    };\n};\n\n//# sourceMappingURL=generators-compiled.js.map"]}