{"version":3,"sources":["nodeify-compiled.js"],"names":[],"mappings":"AAAA;;AAEA,OAAO,OAAP,GAAiB,UAAU,OAAV,EAAmB;AAChC,QAAI,OAAO,QAAQ,QAAR,CAAX;AACA,QAAI,QAAQ,QAAQ,MAApB;AACA,QAAI,WAAW,KAAK,QAApB;AACA,QAAI,WAAW,KAAK,QAApB;;AAEA,aAAS,aAAT,CAAuB,GAAvB,EAA4B,QAA5B,EAAsC;AAClC,YAAI,UAAU,IAAd;AACA,YAAI,CAAC,KAAK,OAAL,CAAa,GAAb,CAAL,EAAwB,OAAO,eAAe,IAAf,CAAoB,OAApB,EAA6B,GAA7B,EAAkC,QAAlC,CAAP;AACxB,YAAI,MAAM,SAAS,QAAT,EAAmB,KAAnB,CAAyB,QAAQ,WAAR,EAAzB,EAAgD,CAAC,IAAD,EAAO,MAAP,CAAc,GAAd,CAAhD,CAAV;AACA,YAAI,QAAQ,QAAZ,EAAsB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAArB;AACH;AACJ;;AAED,aAAS,cAAT,CAAwB,GAAxB,EAA6B,QAA7B,EAAuC;AACnC,YAAI,UAAU,IAAd;AACA,YAAI,WAAW,QAAQ,WAAR,EAAf;AACA,YAAI,MAAM,QAAQ,SAAR,GAAoB,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAxB,EAAkC,IAAlC,CAApB,GAA8D,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAxB,EAAkC,IAAlC,EAAwC,GAAxC,CAAxE;AACA,YAAI,QAAQ,QAAZ,EAAsB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAArB;AACH;AACJ;AACD,aAAS,YAAT,CAAsB,MAAtB,EAA8B,QAA9B,EAAwC;AACpC,YAAI,UAAU,IAAd;AACA,YAAI,CAAC,MAAL,EAAa;AACT,gBAAI,YAAY,IAAI,KAAJ,CAAU,SAAS,EAAnB,CAAhB;AACA,sBAAU,KAAV,GAAkB,MAAlB;AACA,qBAAS,SAAT;AACH;AACD,YAAI,MAAM,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAQ,WAAR,EAAxB,EAA+C,MAA/C,CAAV;AACA,YAAI,QAAQ,QAAZ,EAAsB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAArB;AACH;AACJ;;AAED,YAAQ,SAAR,CAAkB,UAAlB,GAA+B,QAAQ,SAAR,CAAkB,OAAlB,GAA4B,UAAU,QAAV,EAAoB,OAApB,EAA6B;AACpF,YAAI,OAAO,QAAP,IAAmB,UAAvB,EAAmC;AAC/B,gBAAI,UAAU,cAAd;AACA,gBAAI,YAAY,SAAZ,IAAyB,OAAO,OAAP,EAAgB,MAA7C,EAAqD;AACjD,0BAAU,aAAV;AACH;AACD,iBAAK,KAAL,CAAW,OAAX,EAAoB,YAApB,EAAkC,SAAlC,EAA6C,IAA7C,EAAmD,QAAnD;AACH;AACD,eAAO,IAAP;AACH,KATD;AAUH,CA9CD;;AAgDA","file":"nodeify-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nmodule.exports = function (Promise) {\n    var util = require(\"./util\");\n    var async = Promise._async;\n    var tryCatch = util.tryCatch;\n    var errorObj = util.errorObj;\n\n    function spreadAdapter(val, nodeback) {\n        var promise = this;\n        if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n        var ret = tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n        if (ret === errorObj) {\n            async.throwLater(ret.e);\n        }\n    }\n\n    function successAdapter(val, nodeback) {\n        var promise = this;\n        var receiver = promise._boundValue();\n        var ret = val === undefined ? tryCatch(nodeback).call(receiver, null) : tryCatch(nodeback).call(receiver, null, val);\n        if (ret === errorObj) {\n            async.throwLater(ret.e);\n        }\n    }\n    function errorAdapter(reason, nodeback) {\n        var promise = this;\n        if (!reason) {\n            var newReason = new Error(reason + \"\");\n            newReason.cause = reason;\n            reason = newReason;\n        }\n        var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n        if (ret === errorObj) {\n            async.throwLater(ret.e);\n        }\n    }\n\n    Promise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback, options) {\n        if (typeof nodeback == \"function\") {\n            var adapter = successAdapter;\n            if (options !== undefined && Object(options).spread) {\n                adapter = spreadAdapter;\n            }\n            this._then(adapter, errorAdapter, undefined, this, nodeback);\n        }\n        return this;\n    };\n};\n\n//# sourceMappingURL=nodeify-compiled.js.map"]}