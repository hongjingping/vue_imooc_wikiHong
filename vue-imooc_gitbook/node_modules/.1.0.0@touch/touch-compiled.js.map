{"version":3,"sources":["../touch/touch.js"],"names":[],"mappings":"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","file":"touch-compiled.js","sourcesContent":["var fs = require(\"fs\")\n  , cons = require(\"constants\")\n\nmodule.exports = touch\ntouch.touchSync = touch.sync = function (f, options) {\n  return touch(f, options)\n}\n\ntouch.ftouch = ftouch\ntouch.ftouchSync = ftouch.sync = function (fd, options) {\n  return ftouch(fd, options)\n}\n\nfunction validOpts (options) {\n  options = Object.create(options || {})\n\n  // {mtime: true}, {ctime: true}\n  // If set to something else, then treat as epoch ms value\n  var now = new Date(options.time || Date.now())\n  if (!options.atime && !options.mtime) {\n    options.atime = options.mtime = now\n  } else {\n    if (true === options.atime) {\n      options.atime = now\n    }\n    if (true === options.mtime) {\n      options.mtime = now\n    }\n  }\n\n  var oflags = 0\n  if (!options.force) {\n    oflags = oflags | cons.O_RDWR\n  }\n\n  if (!options.nocreate) {\n    oflags = oflags | cons.O_CREAT\n  }\n\n  options.oflags = oflags\n  return options\n}\n\nfunction optionsRef (then, arg, options, cb) {\n  if (!options.ref) return then(arg, options, cb)\n\n  return cb\n       ? fs.stat(options.ref, optionsRefcb(then, arg, options, cb))\n       : optionsRefcb(then, arg, options)(null, fs.statSync(options.ref))\n}\n\nfunction optionsRefcb (then, arg, options, cb) { return function (er, s) {\n  if (er) {\n    er.path = er.file = options.ref\n    return cb(er)\n  }\n  options.atime = options.atime && s.atime.getTime()\n  options.mtime = options.mtime && s.mtime.getTime()\n\n  // so we don't keep doing this.\n  options.ref = null\n\n  return then(arg, options, cb)\n}}\n\nfunction touch (f, options, cb) {\n  if (typeof options === \"function\") cb = options, options = null\n  options = validOpts(options)\n  return optionsRef(touch_, f, validOpts(options), cb)\n}\n\nfunction touch_ (f, options, cb) {\n  return openThenF(f, options, cb)\n}\n\nfunction openThenF (f, options, cb) {\n  options.closeAfter = true\n  return cb\n       ? fs.open(f, options.oflags, openThenFcb(options, cb))\n       : openThenFcb(options)(null, fs.openSync(f, options.oflags))\n}\n\nfunction openThenFcb (options, cb) { return function (er, fd) {\n  if (er) {\n    if (fd && options.closeAfter) fs.close(fd, function () {})\n    return cb(er)\n  }\n  return ftouch(fd, options, cb)\n}}\n\nfunction ftouch (fd, options, cb) {\n  if (typeof options === \"function\") cb = options, options = null\n  return optionsRef(ftouch_, fd, validOpts(options), cb)\n}\n\nfunction ftouch_ (fd, options, cb) {\n  // still not set.  leave as what the file already has.\n  return fstatThenFutimes(fd, options, cb)\n}\n\nfunction fstatThenFutimes (fd, options, cb) {\n  if (options.atime && options.mtime) return thenFutimes(fd, options, cb)\n\n  return cb\n       ? fs.fstat(fd, fstatThenFutimescb(fd, options, cb))\n       : fstatThenFutimescb(fd, options)(null, fs.fstatSync(fd))\n}\n\nfunction fstatThenFutimescb (fd, options, cb) { return function (er, s) {\n  if (er) {\n    if (options.closeAfter) fs.close(fd, function () {})\n    return cb(er)\n  }\n  options.atime = options.atime || s.atime.getTime()\n  options.mtime = options.mtime || s.mtime.getTime()\n  return thenFutimes(fd, options, cb)\n}}\n\nfunction thenFutimes (fd, options, cb) {\n  if (typeof options.atime === \"object\") {\n    options.atime = options.atime.getTime()\n  }\n  if (typeof options.mtime === \"object\") {\n    options.mtime = options.mtime.getTime()\n  }\n\n  var a = parseInt(options.atime / 1000, 10)\n    , m = parseInt(options.mtime / 1000, 10)\n  return cb\n       ? fs.futimes(fd, a, m, thenFutimescb(fd, options, cb))\n       : thenFutimescb(fd, options)(null, fs.futimesSync(fd, a, m))\n}\n\nfunction thenFutimescb (fd, options, cb) { return function (er, res) {\n  if (er) {\n    if (options.closeAfter) fs.close(fd, function () {})\n    return cb(er)\n  }\n  return finish(fd, options, res, cb)\n}}\n\nfunction finish (fd, options, res, cb) {\n  return options.closeAfter ? finishClose(fd, options, res, cb)\n       : cb ? cb(null, res)\n       : res\n}\n\nfunction finishClose (fd, options, res, cb) {\n  return cb\n       ? fs.close(fd, finishClosecb(res, options, cb))\n       : finishClosecb(res, options)(null, fs.closeSync(fd))\n}\n\nfunction finishClosecb (res, options, cb) { return function (er) {\n  if (er) return cb(er)\n  options.closeAfter = null\n  return finish(null, options, res, cb)\n}}\n"]}