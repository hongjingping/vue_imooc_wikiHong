{"version":3,"sources":["cli-compiled.js"],"names":[],"mappings":"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","file":"cli-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar chalk = require(\"chalk\");\nvar archy = require(\"archy\");\nvar listify = require(\"listify\");\nvar logUpdate = require(\"log-update\");\nvar elegantSpinner = require(\"elegant-spinner\");\nvar truncate = require(\"cli-truncate\");\nvar os = require(\"os\");\nvar promise_finally_1 = require(\"promise-finally\");\nvar pkg = require('../../package.json');\nvar statusFrame;\nvar statusTimeout;\nvar statusMessage;\nfunction log(message) {\n    logUpdate.clear();\n    console.error(message);\n    render();\n}\nexports.log = log;\nfunction formatLine(color, type, line, prefix) {\n    return chalk.bgBlack.white('typings') + \" \" + color(type) + \" \" + (prefix ? chalk.magenta(prefix + \" \") : '') + line;\n}\nvar loglevels = {\n    debug: 0,\n    info: 1,\n    warn: 2,\n    error: 3,\n    silent: 4\n};\nvar loglevel = loglevels['info'];\nfunction setLoglevel(level) {\n    if (!loglevels.hasOwnProperty(level)) {\n        logError(\"invalid log level (options are \" + listify(Object.keys(loglevels)) + \")\");\n        return;\n    }\n    return loglevel = loglevels[level];\n}\nexports.setLoglevel = setLoglevel;\nfunction logInfo(message, prefix) {\n    if (loglevel > loglevels['info']) {\n        return;\n    }\n    var output = message.split(/\\r?\\n/g).map(function (line) {\n        return formatLine(chalk.bgBlack.cyan, 'INFO', line, prefix);\n    }).join('\\n');\n    log(output);\n}\nexports.logInfo = logInfo;\nfunction logWarning(message, prefix) {\n    if (loglevel > loglevels['warn']) {\n        return;\n    }\n    var output = message.split(/\\r?\\n/g).map(function (line) {\n        return formatLine(chalk.bgYellow.black, 'WARN', line, prefix);\n    }).join('\\n');\n    log(output);\n}\nexports.logWarning = logWarning;\nfunction logError(message, prefix) {\n    if (loglevel > loglevels['error']) {\n        return;\n    }\n    var output = message.split(/\\r?\\n/g).map(function (line) {\n        return formatLine(chalk.bgBlack.red, 'ERR!', line, prefix);\n    }).join('\\n');\n    log(output);\n}\nexports.logError = logError;\nfunction setStatus(message) {\n    statusMessage = message;\n}\nexports.setStatus = setStatus;\nfunction render() {\n    clearInterval(statusTimeout);\n    if (statusFrame && process.stdout.isTTY) {\n        var status = chalk.cyan(statusFrame());\n        if (statusMessage) {\n            status += \" \" + statusMessage;\n        }\n        logUpdate(truncate(status, process.stdout.columns));\n        statusTimeout = setTimeout(render, 50);\n    }\n}\nexports.render = render;\nfunction startSpinner() {\n    statusFrame = elegantSpinner();\n    render();\n}\nexports.startSpinner = startSpinner;\nfunction stopSpinner() {\n    clearTimeout(statusTimeout);\n    statusFrame = undefined;\n    statusTimeout = undefined;\n    statusMessage = undefined;\n    logUpdate.clear();\n    logUpdate.done();\n}\nexports.stopSpinner = stopSpinner;\nfunction spinner(promise) {\n    startSpinner();\n    return promise_finally_1.default(Promise.resolve(promise), stopSpinner);\n}\nexports.spinner = spinner;\nfunction handle(promise, options) {\n    return Promise.resolve(promise).catch(function (err) {\n        return handleError(err, options);\n    });\n}\nexports.handle = handle;\nfunction handleError(error, options) {\n    var cause = error.cause;\n    logError(error.message, 'message');\n    while (cause) {\n        logError(cause.message, 'caused by');\n        cause = cause.cause;\n    }\n    if (options.verbose && error.stack) {\n        logError('');\n        logError(error.stack, 'stack');\n    }\n    logError('');\n    logError(process.cwd(), 'cwd');\n    logError(os.type() + \" \" + os.release(), 'system');\n    logError(process.argv.map(function (arg) {\n        return JSON.stringify(arg);\n    }).join(' '), 'command');\n    logError(process.version, 'node -v');\n    logError(pkg.version, \"typings -v\");\n    if (error.code) {\n        logError(error.code, 'code');\n    }\n    logError('');\n    logError('If you need help, you may report this error at:');\n    logError(\"  <https://github.com/typings/typings/issues>\");\n    process.exit(1);\n}\nexports.handleError = handleError;\nfunction toDependencyName(name, node, suffix) {\n    var fullname = node.version ? name + \"@\" + node.version : name;\n    return suffix ? fullname + \" \" + suffix : fullname;\n}\nfunction archifyDependencyTree(options) {\n    var result = {\n        label: options.name ? toDependencyName(options.name, options.tree) : '',\n        nodes: []\n    };\n    function children(nodes, dependencies, suffix) {\n        for (var _i = 0, _a = Object.keys(dependencies).sort(); _i < _a.length; _i++) {\n            var name = _a[_i];\n            var tree_1 = dependencies[name];\n            nodes.push(traverse({\n                label: toDependencyName(name, tree_1, suffix),\n                nodes: []\n            }, tree_1));\n        }\n    }\n    function traverse(result, tree) {\n        var nodes = result.nodes;\n        children(nodes, tree.dependencies);\n        children(nodes, tree.devDependencies, chalk.gray('(dev)'));\n        children(nodes, tree.peerDependencies, chalk.gray('(peer)'));\n        children(nodes, tree.globalDependencies, chalk.gray('(global)'));\n        children(nodes, tree.globalDevDependencies, chalk.gray('(global dev)'));\n        return result;\n    }\n    var tree = traverse(result, options.tree);\n    return archy(tree, '', { unicode: options.unicode });\n}\nexports.archifyDependencyTree = archifyDependencyTree;\n//# sourceMappingURL=cli.js.map\n\n//# sourceMappingURL=cli-compiled.js.map"]}