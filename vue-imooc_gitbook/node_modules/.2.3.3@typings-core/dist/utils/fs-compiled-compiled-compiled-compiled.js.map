{"version":3,"sources":["../../../typings/node_modules/typings-core/dist/utils/fs-compiled-compiled-compiled.js"],"names":[],"mappings":"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","file":"fs-compiled-compiled-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar fs = require(\"graceful-fs\");\nvar extend = require(\"xtend\");\nvar thenify = require(\"thenify\");\nvar stripBom = require(\"strip-bom\");\nvar parse = require(\"parse-json\");\nvar popsicle = require(\"popsicle\");\nvar popsicleStatus = require(\"popsicle-status\");\nvar popsicleRetry = require(\"popsicle-retry\");\nvar popsicleRewrite = require(\"popsicle-rewrite\");\nvar detectIndent = require(\"detect-indent\");\nvar sortKeys = require(\"sort-keys\");\nvar Mkdirp = require(\"mkdirp\");\nvar uniq = require(\"array-uniq\");\nvar lockfile = require(\"lockfile\");\nvar Rimraf = require(\"rimraf\");\nvar createProxy = require(\"popsicle-proxy-agent\");\nvar Throat = require(\"throat\");\nvar promise_finally_1 = require(\"promise-finally\");\nvar Touch = require(\"touch\");\nvar path_1 = require(\"path\");\nvar url_1 = require(\"url\");\nvar template = require(\"string-template\");\nvar config_1 = require(\"./config\");\nvar path_2 = require(\"./path\");\nvar references_1 = require(\"./references\");\nvar rc_1 = require(\"./rc\");\nvar store_1 = require(\"./store\");\nvar debug_1 = require(\"./debug\");\nvar pkg = require('../../package.json');\nvar registryURL = url_1.parse(rc_1.default.registryURL);\nvar throat = Throat(Promise);\nexports.touch = throat(10, thenify(Touch));\nexports.stat = throat(10, thenify(fs.stat));\nexports.readFile = throat(10, thenify(fs.readFile));\nexports.writeFile = thenify(fs.writeFile);\nexports.mkdirp = throat(10, thenify(Mkdirp));\nexports.unlink = throat(10, thenify(fs.unlink));\nexports.lock = throat(10, thenify(lockfile.lock));\nexports.unlock = throat(10, thenify(lockfile.unlock));\nexports.rimraf = throat(10, thenify(Rimraf));\nexports.readdir = throat(10, thenify(fs.readdir));\nexports.rmdir = throat(10, thenify(fs.rmdir));\nfunction rmdirUntil(path, until) {\n    if (path === until) {\n        return Promise.resolve();\n    }\n    return exports.readdir(path).then(function (files) {\n        if (files.length) {\n            return;\n        }\n        return exports.rmdir(path).then(function () {\n            return rmdirUntil(path_1.dirname(path), until);\n        });\n    }).catch(function (err) {\n        if (err.code === 'ENOENT') {\n            return;\n        }\n        return Promise.reject(err);\n    });\n}\nexports.rmdirUntil = rmdirUntil;\nfunction isFile(path) {\n    return exports.stat(path).then(function (stat) {\n        return stat.isFile();\n    }, function () {\n        return false;\n    });\n}\nexports.isFile = isFile;\nfunction readJson(path, allowEmpty) {\n    return exports.readFile(path, 'utf8').then(stripBom).then(function (contents) {\n        return parseJson(contents, path, allowEmpty);\n    });\n}\nexports.readJson = readJson;\nfunction writeJson(path, json, indent, eol) {\n    return exports.writeFile(path, stringifyJson(json, indent, eol));\n}\nexports.writeJson = writeJson;\nfunction readConfig(path) {\n    return readJson(path, true).then(function (data) {\n        return parseConfig(data, path);\n    });\n}\nexports.readConfig = readConfig;\nfunction readConfigFrom(path) {\n    return readJsonFrom(path, true).then(function (data) {\n        return parseConfig(data, path);\n    });\n}\nexports.readConfigFrom = readConfigFrom;\nfunction parseConfig(config, path) {\n    return config;\n}\nexports.parseConfig = parseConfig;\nexports.proxy = createProxy({\n    proxy: rc_1.default.proxy,\n    httpProxy: rc_1.default.httpProxy,\n    httpsProxy: rc_1.default.httpsProxy,\n    noProxy: rc_1.default.noProxy\n});\nexports.readHttp = throat(5, function readHttp(url) {\n    var rejectUnauthorized = rc_1.default.rejectUnauthorized,\n        ca = rc_1.default.ca,\n        key = rc_1.default.key,\n        cert = rc_1.default.cert,\n        userAgent = rc_1.default.userAgent;\n    return popsicle.get({\n        url: url,\n        headers: {\n            'User-Agent': template(userAgent, {\n                nodeVersion: process.version,\n                platform: process.platform,\n                arch: process.arch,\n                typingsVersion: pkg.version\n            })\n        },\n        transport: popsicle.createTransport({\n            ca: ca,\n            key: key,\n            cert: cert,\n            agent: exports.proxy(url),\n            rejectUnauthorized: rejectUnauthorized\n        })\n    }).use(popsicleStatus(200)).use(popsicleRewrite(rc_1.default.urlRewrites || {})).use(function (request, next) {\n        if (request.Url.host === registryURL.host) {\n            if (store_1.default.get('clientId')) {\n                request.set('Typings-Client-Id', store_1.default.get('clientId'));\n            }\n            return next().then(function (response) {\n                if (response.get('Typings-Client-Id')) {\n                    store_1.default.set('clientId', response.get('Typings-Client-Id'));\n                }\n                return response;\n            });\n        }\n        return next();\n    }).use(function (request, next) {\n        var hostname = request.Url.hostname;\n        if (rc_1.default.githubToken && (hostname === 'raw.githubusercontent.com' || hostname === 'api.github.com')) {\n            request.set('Authorization', \"token \" + rc_1.default.githubToken);\n        }\n        return next();\n    }).use(popsicleRetry()).then(function (response) {\n        debug_1.default('http response', response.toJSON());\n        return response.body;\n    });\n});\nfunction readFileFrom(from) {\n    return path_2.isHttp(from) ? exports.readHttp(from) : exports.readFile(from, 'utf8');\n}\nexports.readFileFrom = readFileFrom;\nfunction readJsonFrom(from, allowEmpty) {\n    return readFileFrom(from).then(stripBom).then(function (contents) {\n        return parseJson(contents, from, allowEmpty);\n    });\n}\nexports.readJsonFrom = readJsonFrom;\nfunction stringifyJson(json, indent, eol) {\n    if (eol === void 0) {\n        eol = path_2.EOL;\n    }\n    return path_2.normalizeEOL(JSON.stringify(json, null, indent || 2), eol) + eol;\n}\nexports.stringifyJson = stringifyJson;\nfunction parseJson(contents, path, allowEmpty) {\n    if (contents === '' && allowEmpty) {\n        return {};\n    }\n    return parse(contents, null, path);\n}\nexports.parseJson = parseJson;\nfunction transformFile(path, transform) {\n    function handle(contents) {\n        return Promise.resolve(transform(contents)).then(function (contents) {\n            return exports.writeFile(path, contents);\n        });\n    }\n    var lockfile = path + \".lock\";\n    var lockOptions = { wait: 250, retries: 25, stale: 60000 };\n    var result = exports.lock(lockfile, lockOptions).then(function () {\n        return exports.readFile(path, 'utf8');\n    }).then(function (contents) {\n        return handle(contents);\n    }, function () {\n        return handle(undefined);\n    });\n    return promise_finally_1.default(result, function () {\n        return exports.unlock(lockfile);\n    });\n}\nexports.transformFile = transformFile;\nfunction transformJson(path, transform, allowEmpty) {\n    return transformFile(path, function (contents) {\n        var indent = contents ? detectIndent(contents).indent : undefined;\n        var json = contents ? parseJson(stripBom(contents), path, allowEmpty) : undefined;\n        var eol = contents ? path_2.detectEOL(contents) : undefined;\n        return Promise.resolve(transform(json)).then(function (json) {\n            return stringifyJson(json, indent, eol);\n        });\n    });\n}\nexports.transformJson = transformJson;\nfunction transformConfig(cwd, transform) {\n    var path = path_1.join(cwd, config_1.CONFIG_FILE);\n    return transformJson(path, function (config) {\n        if (config === void 0) {\n            config = {};\n        }\n        return Promise.resolve(transform(parseConfig(config, path))).then(function (config) {\n            if (config.dependencies) {\n                config.dependencies = sortKeys(config.dependencies);\n            }\n            if (config.peerDependencies) {\n                config.peerDependencies = sortKeys(config.peerDependencies);\n            }\n            if (config.devDependencies) {\n                config.devDependencies = sortKeys(config.devDependencies);\n            }\n            if (config.globalDependencies) {\n                config.globalDependencies = sortKeys(config.globalDependencies);\n            }\n            if (config.globalDevDependencies) {\n                config.globalDevDependencies = sortKeys(config.globalDevDependencies);\n            }\n            return config;\n        });\n    }, true);\n}\nexports.transformConfig = transformConfig;\nfunction transformDtsFile(path, transform) {\n    var cwd = path_1.dirname(path);\n    return transformFile(path, function (contents) {\n        var typings = references_1.parseReferences(contents, cwd);\n        return Promise.resolve(transform(typings)).then(function (typings) {\n            return references_1.stringifyReferences(uniq(typings).sort(), cwd);\n        });\n    });\n}\nexports.transformDtsFile = transformDtsFile;\nfunction treeToJson(tree) {\n    return extend(tree, {\n        parent: undefined,\n        dependencies: dependenciesToJson(tree.dependencies),\n        devDependencies: dependenciesToJson(tree.devDependencies),\n        peerDependencies: dependenciesToJson(tree.peerDependencies),\n        globalDependencies: dependenciesToJson(tree.globalDependencies),\n        globalDevDependencies: dependenciesToJson(tree.globalDevDependencies)\n    });\n}\nexports.treeToJson = treeToJson;\nfunction dependenciesToJson(dependencies) {\n    var json = {};\n    var keys = Object.keys(dependencies);\n    if (keys.length === 0) {\n        return;\n    }\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        json[key] = treeToJson(dependencies[key]);\n    }\n    return json;\n}\nexports.dependenciesToJson = dependenciesToJson;\n//# sourceMappingURL=fs.js.map\n\n//# sourceMappingURL=fs-compiled.js.map\n\n//# sourceMappingURL=fs-compiled-compiled.js.map\n\n//# sourceMappingURL=fs-compiled-compiled-compiled.js.map"]}