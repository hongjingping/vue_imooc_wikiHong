{"version":3,"sources":["../../../typings/node_modules/typings-core/dist/lib/compile.spec.js"],"names":[],"mappings":"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","file":"compile.spec-compiled.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar test = require(\"blue-tape\");\nvar nock = require(\"nock\");\nvar path_1 = require(\"path\");\nvar events_1 = require(\"events\");\nvar compile_1 = require(\"./compile\");\nvar config_1 = require(\"../utils/config\");\nvar dependencies_1 = require(\"./dependencies\");\nvar FIXTURES_DIR = path_1.join(__dirname, '__test__/fixtures');\ntest('compile', function (t) {\n    t.test('fixtures', function (t) {\n        t.test('compile a normal definition', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile');\n            var root = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'root',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                browser: {\n                    'b/b': 'browser'\n                },\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var a = {\n                src: path_1.join(FIXTURE_DIR, \"a/\" + config_1.CONFIG_FILE),\n                main: undefined,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                typings: 'typed.d.ts',\n                browserTypings: 'typed.browser.d.ts',\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var b = {\n                src: path_1.join(FIXTURE_DIR, 'bower.json'),\n                main: undefined,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                typings: 'typings/b.d.ts',\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var browser = {\n                src: path_1.join(FIXTURE_DIR, 'package.json'),\n                main: undefined,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                typings: 'browser.d.ts',\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var dep = {\n                src: path_1.join(FIXTURE_DIR, \"dep/\" + config_1.CONFIG_FILE),\n                main: 'dep/main.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            root.dependencies.a = a;\n            root.dependencies['b/b'] = b;\n            root.dependencies.browser = browser;\n            a.dependencies.dep = dep;\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(root, ['main', 'browser'], { name: 'root', cwd: __dirname, global: false, meta: true, emitter: emitter })\n                .then(function (out) {\n                t.equal(out.results.main, [\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/dep/path.d.ts\",\n                    'declare module \\'~root~a~dep/path\\' {',\n                    'export const isDep: boolean',\n                    '}',\n                    '',\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/a/typed.d.ts\",\n                    'declare module \\'~root~a/typed\\' {',\n                    'import { isDep } from \\'~root~a~dep/path\\'',\n                    '',\n                    'export interface ITest {',\n                    '  foo: string',\n                    '  bar: boolean',\n                    '}',\n                    '',\n                    'export default function (): ITest',\n                    '}',\n                    '',\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/typings/b.d.ts\",\n                    'declare module \\'~root~b/b/typings/b\\' {',\n                    'export const foo: number',\n                    '}',\n                    '',\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/root.import.d.ts\",\n                    'declare module \\'~root/root.import\\' {',\n                    'export const test: string',\n                    '}',\n                    'declare module \\'root/root.import\\' {',\n                    'export * from \\'~root/root.import\\';',\n                    '}',\n                    '',\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/root.d.ts\",\n                    'declare module \\'~root/root\\' {',\n                    'import a from \\'~root~a/typed\\'',\n                    'import b = require(\\'~root~b/b/typings/b\\')',\n                    'export * from \\'~root/root.import\\'',\n                    'export default a',\n                    '}',\n                    'declare module \\'root/root\\' {',\n                    'export * from \\'~root/root\\';',\n                    'export { default } from \\'~root/root\\';',\n                    '}',\n                    'declare module \\'root\\' {',\n                    'export * from \\'~root/root\\';',\n                    'export { default } from \\'~root/root\\';',\n                    '}',\n                    ''\n                ].join('\\n'));\n                t.equal(out.results.browser, [\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/a/typed.browser.d.ts\",\n                    'declare module \\'~root~a/typed.browser\\' {',\n                    'export function browser (): boolean',\n                    '}',\n                    '',\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/browser.d.ts\",\n                    'declare module \\'~root~browser/browser\\' {',\n                    'export const bar: boolean',\n                    '}',\n                    '',\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/root.import.d.ts\",\n                    'declare module \\'~root/root.import\\' {',\n                    'export const test: string',\n                    '}',\n                    'declare module \\'root/root.import\\' {',\n                    'export * from \\'~root/root.import\\';',\n                    '}',\n                    '',\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile/root.d.ts\",\n                    'declare module \\'~root/root\\' {',\n                    'import a from \\'~root~a/typed.browser\\'',\n                    'import b = require(\\'~root~browser/browser\\')',\n                    'export * from \\'~root/root.import\\'',\n                    'export default a',\n                    '}',\n                    'declare module \\'root/root\\' {',\n                    'export * from \\'~root/root\\';',\n                    'export { default } from \\'~root/root\\';',\n                    '}',\n                    'declare module \\'root\\' {',\n                    'export * from \\'~root/root\\';',\n                    'export { default } from \\'~root/root\\';',\n                    '}',\n                    ''\n                ].join('\\n'));\n            });\n        });\n        t.test('compile export equals', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-export-equals');\n            var file = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'file.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(file, ['main', 'browser'], { name: 'foobar', cwd: __dirname, global: false, meta: false, emitter: emitter })\n                .then(function (out) {\n                t.equal(out.results.main, [\n                    'declare module \\'foobar\\' {',\n                    'function foo (value: string): foo.Bar;',\n                    '',\n                    'module foo {',\n                    '  export interface Bar {',\n                    '    (message: any, ...args: any[]): void;',\n                    '    enabled: boolean;',\n                    '    namespace: string;',\n                    '  }',\n                    '}',\n                    '',\n                    'export = foo;',\n                    '}',\n                    ''\n                ].join('\\n'));\n                t.equal(out.results.main, out.results.browser);\n            });\n        });\n        t.test('compile export default', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-export-default');\n            var file = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'index.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(file, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter })\n                .then(function (out) {\n                t.equal(out.results.main, [\n                    'declare module \\'test\\' {',\n                    'const foo: string;',\n                    '',\n                    'export default foo;',\n                    '}',\n                    ''\n                ].join('\\n'));\n            });\n        });\n        t.test('compile duplicate files from different import contexts', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-dep-dupe');\n            var root = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'index.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var foo = {\n                src: path_1.join(FIXTURE_DIR, 'foo', config_1.CONFIG_FILE),\n                main: 'index.d.ts',\n                parent: root,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            root.dependencies.foo = foo;\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(root, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter })\n                .then(function (out) {\n                t.equal(out.results.main, [\n                    'declare module \\'~test~foo/x\\' {',\n                    'import * as bar from \\'~test~foo/index\\'',\n                    '',\n                    'export { bar }',\n                    '}',\n                    '',\n                    'declare module \\'~test~foo/index\\' {',\n                    'export * from \\'~test~foo/x\\'',\n                    '}',\n                    '',\n                    'declare module \\'test\\' {',\n                    'import * as x from \\'~test~foo/x\\'',\n                    'export * from \\'~test~foo/index\\'',\n                    '}',\n                    ''\n                ].join('\\n'));\n            });\n        });\n        t.test('compile module augmentation', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-module-augmentation');\n            var file = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'index.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(file, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter })\n                .then(function (out) {\n                t.equal(out.results.main, [\n                    'declare module \\'~test/import\\' {',\n                    'function main (): boolean;',\n                    '',\n                    'export { main }',\n                    '}',\n                    'declare module \\'test/import\\' {',\n                    'export * from \\'~test/import\\';',\n                    '}',\n                    '',\n                    'declare module \\'~test/index\\' {',\n                    'import * as imported from \\'~test/import\\'',\n                    '',\n                    'module \\'~test/import\\' {',\n                    '  namespace main {',\n                    '    export function augmented (): boolean;',\n                    '  }',\n                    '}',\n                    '',\n                    'export { imported }',\n                    '}',\n                    'declare module \\'test/index\\' {',\n                    'export * from \\'~test/index\\';',\n                    '}',\n                    'declare module \\'test\\' {',\n                    'export * from \\'~test/index\\';',\n                    '}',\n                    ''\n                ].join('\\n'));\n            });\n        });\n        t.test('compile a global definition', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-global');\n            var node = {\n                src: __filename,\n                raw: undefined,\n                postmessage: undefined,\n                global: true,\n                typings: path_1.join(FIXTURE_DIR, 'node.d.ts'),\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var fs = {\n                src: path_1.join(FIXTURE_DIR, 'fs.d.ts'),\n                main: undefined,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                typings: path_1.join(FIXTURE_DIR, 'fs.d.ts'),\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            node.dependencies.fs = fs;\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(node, ['main'], { name: 'node', cwd: __dirname, global: true, meta: false, emitter: emitter })\n                .then(function (out) {\n                t.equal(out.results.main, [\n                    'declare module \\'fs\\' {',\n                    'export function readFileSync (path: string, encoding: string): string',\n                    'export function readFileSync (path: string): Buffer',\n                    '}',\n                    '',\n                    'declare var __dirname: string',\n                    ''\n                ].join('\\n'));\n            });\n        });\n        t.test('compile inline global definitions', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-inline-global');\n            var typings = path_1.join(FIXTURE_DIR, 'node.d.ts');\n            var node = {\n                src: __filename,\n                raw: undefined,\n                postmessage: undefined,\n                global: true,\n                typings: typings,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(node, ['main', 'browser'], { name: 'name', cwd: __dirname, global: true, meta: true, emitter: emitter })\n                .then(function (out) {\n                var contents = [\n                    \"// Generated by typings\",\n                    \"// Source: __test__/fixtures/compile-inline-global/node.d.ts\",\n                    'declare const require: (module: string) => any;',\n                    '',\n                    'declare module \"events\" {',\n                    '\\texport const test: boolean;',\n                    '}',\n                    '',\n                    'declare module \"fs\" {',\n                    '\\timport * as events from \"events\";',\n                    '}',\n                    ''\n                ].join('\\n');\n                t.equal(out.results.main, contents);\n                t.equal(out.results.main, out.results.browser);\n            });\n        });\n    });\n    t.test('missing error', function (t) {\n        var node = {\n            src: 'http://example.com/typings/typings.json',\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            typings: 'http://example.com/typings/index.d.ts',\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(node, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter })\n            .catch(function (result) {\n            t.equal(result.message, 'Unable to read typings for \"test\". You should check the entry paths in \"typings.json\" are up to date');\n        });\n    });\n    t.test('global flag compile error', function (t) {\n        var node = {\n            src: 'http://example.com/typings.json',\n            raw: undefined,\n            postmessage: undefined,\n            global: true,\n            typings: 'http://example.com/index.d.ts',\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(node, ['main'], { name: 'name', cwd: __dirname, global: false, meta: false, emitter: emitter })\n            .catch(function (result) {\n            t.equal(result.message, 'Unable to compile \"name\", the typings are meant to be installed as global ' +\n                'but attempted to be compiled as an external module');\n        });\n    });\n    t.test('global compile error', function (t) {\n        var node = {\n            src: path_1.join(__dirname, '__test__/fixtures/compile-global/node.d.ts'),\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            main: path_1.join(__dirname, '__test__/fixtures/compile-global/node.d.ts'),\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(node, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter })\n            .catch(function (result) {\n            t.equal(result.message, 'Attempted to compile \"test\" as an external module, ' +\n                'but it looks like a global module. ' +\n                'You\\'ll need to enable the global option to continue.');\n        });\n    });\n    t.test('external compile error', function (t) {\n        var node = {\n            src: path_1.join(__dirname, '__test__/fixtures/compile/root.d.ts'),\n            raw: undefined,\n            postmessage: undefined,\n            global: true,\n            main: path_1.join(__dirname, '__test__/fixtures/compile/root.d.ts'),\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(node, ['main'], { name: 'test', cwd: __dirname, global: true, meta: false, emitter: emitter })\n            .catch(function (result) {\n            t.equal(result.message, 'Attempted to compile \"test\" as a global module, ' +\n                'but it looks like an external module. ' +\n                'You\\'ll need to remove the global option to continue.');\n        });\n    });\n    t.test('no main or typings error', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'main-resolve-error');\n        var main = {\n            src: path_1.join(FIXTURE_DIR, 'package.json'),\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(main, ['main'], { name: 'main', cwd: __dirname, global: false, meta: false, emitter: emitter })\n            .catch(function (error) {\n            t.ok(/^Unable to read typings for \"main\"/.test(error.message));\n        });\n    });\n    t.test('no module dts file error', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'node-resolve-error');\n        var main = {\n            src: path_1.join(FIXTURE_DIR, 'package.json'),\n            main: 'index.js',\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var dependency = {\n            main: 'index.js',\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            src: path_1.join(FIXTURE_DIR, 'node_modules/test/package.json'),\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        main.dependencies.test = dependency;\n        t.plan(1);\n        return compile_1.compile(main, ['main'], { name: 'main', cwd: __dirname, global: false, meta: false, emitter: emitter })\n            .catch(function (error) {\n            t.ok(/^Unable to read typings for \"test\"/.test(error.message));\n        });\n    });\n    t.test('override dependency with local file', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-module-file-override');\n        var emitter = new events_1.EventEmitter();\n        return dependencies_1.resolveNpmDependencies({ cwd: FIXTURE_DIR, dev: false, emitter: emitter })\n            .then(function (tree) {\n            return compile_1.compile(tree, ['browser'], { name: 'main', cwd: __dirname, global: false, meta: false, emitter: emitter });\n        })\n            .then(function (out) {\n            t.equal(out.results.browser, [\n                'declare module \\'~main/override\\' {',\n                'function test (): string;',\n                '',\n                'export = test;',\n                '}',\n                'declare module \\'main/override\\' {',\n                'import main = require(\\'~main/override\\');',\n                'export = main;',\n                '}',\n                '',\n                'declare module \\'main\\' {',\n                'import * as foo from \\'~main/override\\'',\n                '',\n                'export = foo',\n                '}',\n                ''\n            ].join('\\n'));\n        });\n    });\n    t.test('resolve and compile local file override with dependency', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-file-module-override');\n        var emitter = new events_1.EventEmitter();\n        return dependencies_1.resolveNpmDependencies({ cwd: FIXTURE_DIR, dev: false, emitter: emitter })\n            .then(function (tree) {\n            return compile_1.compile(tree, ['main', 'browser'], { name: 'main', cwd: __dirname, global: false, meta: false, emitter: emitter });\n        })\n            .then(function (out) {\n            t.equal(out.results.main, [\n                'declare module \\'~main/imported/index\\' {',\n                'export function isNotDep (): boolean;',\n                '}',\n                'declare module \\'main/imported/index\\' {',\n                'export * from \\'~main/imported/index\\';',\n                '}',\n                '',\n                'declare module \\'~main/index\\' {',\n                'export * from \\'~main/imported/index\\'',\n                '}',\n                'declare module \\'main/index\\' {',\n                'export * from \\'~main/index\\';',\n                '}',\n                'declare module \\'main\\' {',\n                'export * from \\'~main/index\\';',\n                '}',\n                ''\n            ].join('\\n'));\n            t.equal(out.results.browser, [\n                'declare module \\'~main~dep/index\\' {',\n                'export function isDep (): boolean;',\n                '}',\n                '',\n                'declare module \\'~main/index\\' {',\n                'export * from \\'~main~dep/index\\'',\n                '}',\n                'declare module \\'main/index\\' {',\n                'export * from \\'~main/index\\';',\n                '}',\n                'declare module \\'main\\' {',\n                'export * from \\'~main/index\\';',\n                '}',\n                ''\n            ].join('\\n'));\n        });\n    });\n    t.test('resolve over http', function (t) {\n        var node = {\n            src: 'http://example.com/typings.json',\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            main: 'http://example.com/index.d.ts?query=test',\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        nock('http://example.com')\n            .get('/index.d.ts?query=test')\n            .matchHeader('User-Agent', /^typings\\/\\d+\\.\\d+\\.\\d+ node\\/v\\d+\\.\\d+\\.\\d+.*$/)\n            .reply(200, 'export * from \"./test\"');\n        nock('http://example.com')\n            .get('/test?query=test')\n            .reply(404);\n        nock('http://example.com')\n            .get('/test.d.ts?query=test')\n            .reply(200, 'export const test: boolean');\n        return compile_1.compile(node, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter })\n            .then(function (out) {\n            t.equal(out.results.main, [\n                'declare module \\'~test/test\\' {',\n                'export const test: boolean',\n                '}',\n                'declare module \\'test/test\\' {',\n                'export * from \\'~test/test\\';',\n                '}',\n                '',\n                'declare module \\'~test/index\\' {',\n                'export * from \\'~test/test\\'',\n                '}',\n                'declare module \\'test/index\\' {',\n                'export * from \\'~test/index\\';',\n                '}',\n                'declare module \\'test\\' {',\n                'export * from \\'~test/index\\';',\n                '}',\n                ''\n            ].join('\\n'));\n        });\n    });\n    t.test('resolve files array', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-files-array');\n        var tree = {\n            src: path_1.join(FIXTURE_DIR, 'typings.json'),\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            files: ['a.d.ts', 'b.d.ts'],\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        return compile_1.compile(tree, ['main', 'browser'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter })\n            .then(function (out) {\n            t.equal(out.results.main, [\n                'declare module \\'~test/a\\' {',\n                'export const a: boolean;',\n                '}',\n                'declare module \\'test/a\\' {',\n                'export * from \\'~test/a\\';',\n                '}',\n                '',\n                'declare module \\'~test/b\\' {',\n                'export const b: boolean;',\n                '}',\n                'declare module \\'test/b\\' {',\n                'export * from \\'~test/b\\';',\n                '}',\n                ''\n            ].join('\\n'));\n            t.equal(out.results.main, out.results.browser);\n        });\n    });\n});\n//# sourceMappingURL=compile.spec.js.map"]}