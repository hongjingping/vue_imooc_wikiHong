{"version":3,"sources":["compile.spec-compiled.js"],"names":[],"mappings":"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","file":"compile.spec-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar test = require(\"blue-tape\");\nvar nock = require(\"nock\");\nvar path_1 = require(\"path\");\nvar events_1 = require(\"events\");\nvar compile_1 = require(\"./compile\");\nvar config_1 = require(\"../utils/config\");\nvar dependencies_1 = require(\"./dependencies\");\nvar FIXTURES_DIR = path_1.join(__dirname, '__test__/fixtures');\ntest('compile', function (t) {\n    t.test('fixtures', function (t) {\n        t.test('compile a normal definition', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile');\n            var root = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'root',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                browser: {\n                    'b/b': 'browser'\n                },\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var a = {\n                src: path_1.join(FIXTURE_DIR, \"a/\" + config_1.CONFIG_FILE),\n                main: undefined,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                typings: 'typed.d.ts',\n                browserTypings: 'typed.browser.d.ts',\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var b = {\n                src: path_1.join(FIXTURE_DIR, 'bower.json'),\n                main: undefined,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                typings: 'typings/b.d.ts',\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var browser = {\n                src: path_1.join(FIXTURE_DIR, 'package.json'),\n                main: undefined,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                typings: 'browser.d.ts',\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var dep = {\n                src: path_1.join(FIXTURE_DIR, \"dep/\" + config_1.CONFIG_FILE),\n                main: 'dep/main.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            root.dependencies.a = a;\n            root.dependencies['b/b'] = b;\n            root.dependencies.browser = browser;\n            a.dependencies.dep = dep;\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(root, ['main', 'browser'], { name: 'root', cwd: __dirname, global: false, meta: true, emitter: emitter }).then(function (out) {\n                t.equal(out.results.main, [\"// Generated by typings\", \"// Source: __test__/fixtures/compile/dep/path.d.ts\", 'declare module \\'~root~a~dep/path\\' {', 'export const isDep: boolean', '}', '', \"// Generated by typings\", \"// Source: __test__/fixtures/compile/a/typed.d.ts\", 'declare module \\'~root~a/typed\\' {', 'import { isDep } from \\'~root~a~dep/path\\'', '', 'export interface ITest {', '  foo: string', '  bar: boolean', '}', '', 'export default function (): ITest', '}', '', \"// Generated by typings\", \"// Source: __test__/fixtures/compile/typings/b.d.ts\", 'declare module \\'~root~b/b/typings/b\\' {', 'export const foo: number', '}', '', \"// Generated by typings\", \"// Source: __test__/fixtures/compile/root.import.d.ts\", 'declare module \\'~root/root.import\\' {', 'export const test: string', '}', 'declare module \\'root/root.import\\' {', 'export * from \\'~root/root.import\\';', '}', '', \"// Generated by typings\", \"// Source: __test__/fixtures/compile/root.d.ts\", 'declare module \\'~root/root\\' {', 'import a from \\'~root~a/typed\\'', 'import b = require(\\'~root~b/b/typings/b\\')', 'export * from \\'~root/root.import\\'', 'export default a', '}', 'declare module \\'root/root\\' {', 'export * from \\'~root/root\\';', 'export { default } from \\'~root/root\\';', '}', 'declare module \\'root\\' {', 'export * from \\'~root/root\\';', 'export { default } from \\'~root/root\\';', '}', ''].join('\\n'));\n                t.equal(out.results.browser, [\"// Generated by typings\", \"// Source: __test__/fixtures/compile/a/typed.browser.d.ts\", 'declare module \\'~root~a/typed.browser\\' {', 'export function browser (): boolean', '}', '', \"// Generated by typings\", \"// Source: __test__/fixtures/compile/browser.d.ts\", 'declare module \\'~root~browser/browser\\' {', 'export const bar: boolean', '}', '', \"// Generated by typings\", \"// Source: __test__/fixtures/compile/root.import.d.ts\", 'declare module \\'~root/root.import\\' {', 'export const test: string', '}', 'declare module \\'root/root.import\\' {', 'export * from \\'~root/root.import\\';', '}', '', \"// Generated by typings\", \"// Source: __test__/fixtures/compile/root.d.ts\", 'declare module \\'~root/root\\' {', 'import a from \\'~root~a/typed.browser\\'', 'import b = require(\\'~root~browser/browser\\')', 'export * from \\'~root/root.import\\'', 'export default a', '}', 'declare module \\'root/root\\' {', 'export * from \\'~root/root\\';', 'export { default } from \\'~root/root\\';', '}', 'declare module \\'root\\' {', 'export * from \\'~root/root\\';', 'export { default } from \\'~root/root\\';', '}', ''].join('\\n'));\n            });\n        });\n        t.test('compile export equals', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-export-equals');\n            var file = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'file.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(file, ['main', 'browser'], { name: 'foobar', cwd: __dirname, global: false, meta: false, emitter: emitter }).then(function (out) {\n                t.equal(out.results.main, ['declare module \\'foobar\\' {', 'function foo (value: string): foo.Bar;', '', 'module foo {', '  export interface Bar {', '    (message: any, ...args: any[]): void;', '    enabled: boolean;', '    namespace: string;', '  }', '}', '', 'export = foo;', '}', ''].join('\\n'));\n                t.equal(out.results.main, out.results.browser);\n            });\n        });\n        t.test('compile export default', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-export-default');\n            var file = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'index.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(file, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter }).then(function (out) {\n                t.equal(out.results.main, ['declare module \\'test\\' {', 'const foo: string;', '', 'export default foo;', '}', ''].join('\\n'));\n            });\n        });\n        t.test('compile duplicate files from different import contexts', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-dep-dupe');\n            var root = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'index.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var foo = {\n                src: path_1.join(FIXTURE_DIR, 'foo', config_1.CONFIG_FILE),\n                main: 'index.d.ts',\n                parent: root,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            root.dependencies.foo = foo;\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(root, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter }).then(function (out) {\n                t.equal(out.results.main, ['declare module \\'~test~foo/x\\' {', 'import * as bar from \\'~test~foo/index\\'', '', 'export { bar }', '}', '', 'declare module \\'~test~foo/index\\' {', 'export * from \\'~test~foo/x\\'', '}', '', 'declare module \\'test\\' {', 'import * as x from \\'~test~foo/x\\'', 'export * from \\'~test~foo/index\\'', '}', ''].join('\\n'));\n            });\n        });\n        t.test('compile module augmentation', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-module-augmentation');\n            var file = {\n                src: path_1.join(FIXTURE_DIR, config_1.CONFIG_FILE),\n                main: 'index.d.ts',\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(file, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter }).then(function (out) {\n                t.equal(out.results.main, ['declare module \\'~test/import\\' {', 'function main (): boolean;', '', 'export { main }', '}', 'declare module \\'test/import\\' {', 'export * from \\'~test/import\\';', '}', '', 'declare module \\'~test/index\\' {', 'import * as imported from \\'~test/import\\'', '', 'module \\'~test/import\\' {', '  namespace main {', '    export function augmented (): boolean;', '  }', '}', '', 'export { imported }', '}', 'declare module \\'test/index\\' {', 'export * from \\'~test/index\\';', '}', 'declare module \\'test\\' {', 'export * from \\'~test/index\\';', '}', ''].join('\\n'));\n            });\n        });\n        t.test('compile a global definition', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-global');\n            var node = {\n                src: __filename,\n                raw: undefined,\n                postmessage: undefined,\n                global: true,\n                typings: path_1.join(FIXTURE_DIR, 'node.d.ts'),\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var fs = {\n                src: path_1.join(FIXTURE_DIR, 'fs.d.ts'),\n                main: undefined,\n                raw: undefined,\n                postmessage: undefined,\n                global: false,\n                typings: path_1.join(FIXTURE_DIR, 'fs.d.ts'),\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            node.dependencies.fs = fs;\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(node, ['main'], { name: 'node', cwd: __dirname, global: true, meta: false, emitter: emitter }).then(function (out) {\n                t.equal(out.results.main, ['declare module \\'fs\\' {', 'export function readFileSync (path: string, encoding: string): string', 'export function readFileSync (path: string): Buffer', '}', '', 'declare var __dirname: string', ''].join('\\n'));\n            });\n        });\n        t.test('compile inline global definitions', function (t) {\n            var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-inline-global');\n            var typings = path_1.join(FIXTURE_DIR, 'node.d.ts');\n            var node = {\n                src: __filename,\n                raw: undefined,\n                postmessage: undefined,\n                global: true,\n                typings: typings,\n                dependencies: {},\n                devDependencies: {},\n                peerDependencies: {},\n                globalDependencies: {},\n                globalDevDependencies: {}\n            };\n            var emitter = new events_1.EventEmitter();\n            return compile_1.compile(node, ['main', 'browser'], { name: 'name', cwd: __dirname, global: true, meta: true, emitter: emitter }).then(function (out) {\n                var contents = [\"// Generated by typings\", \"// Source: __test__/fixtures/compile-inline-global/node.d.ts\", 'declare const require: (module: string) => any;', '', 'declare module \"events\" {', '\\texport const test: boolean;', '}', '', 'declare module \"fs\" {', '\\timport * as events from \"events\";', '}', ''].join('\\n');\n                t.equal(out.results.main, contents);\n                t.equal(out.results.main, out.results.browser);\n            });\n        });\n    });\n    t.test('missing error', function (t) {\n        var node = {\n            src: 'http://example.com/typings/typings.json',\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            typings: 'http://example.com/typings/index.d.ts',\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(node, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter }).catch(function (result) {\n            t.equal(result.message, 'Unable to read typings for \"test\". You should check the entry paths in \"typings.json\" are up to date');\n        });\n    });\n    t.test('global flag compile error', function (t) {\n        var node = {\n            src: 'http://example.com/typings.json',\n            raw: undefined,\n            postmessage: undefined,\n            global: true,\n            typings: 'http://example.com/index.d.ts',\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(node, ['main'], { name: 'name', cwd: __dirname, global: false, meta: false, emitter: emitter }).catch(function (result) {\n            t.equal(result.message, 'Unable to compile \"name\", the typings are meant to be installed as global ' + 'but attempted to be compiled as an external module');\n        });\n    });\n    t.test('global compile error', function (t) {\n        var node = {\n            src: path_1.join(__dirname, '__test__/fixtures/compile-global/node.d.ts'),\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            main: path_1.join(__dirname, '__test__/fixtures/compile-global/node.d.ts'),\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(node, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter }).catch(function (result) {\n            t.equal(result.message, 'Attempted to compile \"test\" as an external module, ' + 'but it looks like a global module. ' + 'You\\'ll need to enable the global option to continue.');\n        });\n    });\n    t.test('external compile error', function (t) {\n        var node = {\n            src: path_1.join(__dirname, '__test__/fixtures/compile/root.d.ts'),\n            raw: undefined,\n            postmessage: undefined,\n            global: true,\n            main: path_1.join(__dirname, '__test__/fixtures/compile/root.d.ts'),\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(node, ['main'], { name: 'test', cwd: __dirname, global: true, meta: false, emitter: emitter }).catch(function (result) {\n            t.equal(result.message, 'Attempted to compile \"test\" as a global module, ' + 'but it looks like an external module. ' + 'You\\'ll need to remove the global option to continue.');\n        });\n    });\n    t.test('no main or typings error', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'main-resolve-error');\n        var main = {\n            src: path_1.join(FIXTURE_DIR, 'package.json'),\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        t.plan(1);\n        return compile_1.compile(main, ['main'], { name: 'main', cwd: __dirname, global: false, meta: false, emitter: emitter }).catch(function (error) {\n            t.ok(/^Unable to read typings for \"main\"/.test(error.message));\n        });\n    });\n    t.test('no module dts file error', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'node-resolve-error');\n        var main = {\n            src: path_1.join(FIXTURE_DIR, 'package.json'),\n            main: 'index.js',\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var dependency = {\n            main: 'index.js',\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            src: path_1.join(FIXTURE_DIR, 'node_modules/test/package.json'),\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        main.dependencies.test = dependency;\n        t.plan(1);\n        return compile_1.compile(main, ['main'], { name: 'main', cwd: __dirname, global: false, meta: false, emitter: emitter }).catch(function (error) {\n            t.ok(/^Unable to read typings for \"test\"/.test(error.message));\n        });\n    });\n    t.test('override dependency with local file', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-module-file-override');\n        var emitter = new events_1.EventEmitter();\n        return dependencies_1.resolveNpmDependencies({ cwd: FIXTURE_DIR, dev: false, emitter: emitter }).then(function (tree) {\n            return compile_1.compile(tree, ['browser'], { name: 'main', cwd: __dirname, global: false, meta: false, emitter: emitter });\n        }).then(function (out) {\n            t.equal(out.results.browser, ['declare module \\'~main/override\\' {', 'function test (): string;', '', 'export = test;', '}', 'declare module \\'main/override\\' {', 'import main = require(\\'~main/override\\');', 'export = main;', '}', '', 'declare module \\'main\\' {', 'import * as foo from \\'~main/override\\'', '', 'export = foo', '}', ''].join('\\n'));\n        });\n    });\n    t.test('resolve and compile local file override with dependency', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-file-module-override');\n        var emitter = new events_1.EventEmitter();\n        return dependencies_1.resolveNpmDependencies({ cwd: FIXTURE_DIR, dev: false, emitter: emitter }).then(function (tree) {\n            return compile_1.compile(tree, ['main', 'browser'], { name: 'main', cwd: __dirname, global: false, meta: false, emitter: emitter });\n        }).then(function (out) {\n            t.equal(out.results.main, ['declare module \\'~main/imported/index\\' {', 'export function isNotDep (): boolean;', '}', 'declare module \\'main/imported/index\\' {', 'export * from \\'~main/imported/index\\';', '}', '', 'declare module \\'~main/index\\' {', 'export * from \\'~main/imported/index\\'', '}', 'declare module \\'main/index\\' {', 'export * from \\'~main/index\\';', '}', 'declare module \\'main\\' {', 'export * from \\'~main/index\\';', '}', ''].join('\\n'));\n            t.equal(out.results.browser, ['declare module \\'~main~dep/index\\' {', 'export function isDep (): boolean;', '}', '', 'declare module \\'~main/index\\' {', 'export * from \\'~main~dep/index\\'', '}', 'declare module \\'main/index\\' {', 'export * from \\'~main/index\\';', '}', 'declare module \\'main\\' {', 'export * from \\'~main/index\\';', '}', ''].join('\\n'));\n        });\n    });\n    t.test('resolve over http', function (t) {\n        var node = {\n            src: 'http://example.com/typings.json',\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            main: 'http://example.com/index.d.ts?query=test',\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        nock('http://example.com').get('/index.d.ts?query=test').matchHeader('User-Agent', /^typings\\/\\d+\\.\\d+\\.\\d+ node\\/v\\d+\\.\\d+\\.\\d+.*$/).reply(200, 'export * from \"./test\"');\n        nock('http://example.com').get('/test?query=test').reply(404);\n        nock('http://example.com').get('/test.d.ts?query=test').reply(200, 'export const test: boolean');\n        return compile_1.compile(node, ['main'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter }).then(function (out) {\n            t.equal(out.results.main, ['declare module \\'~test/test\\' {', 'export const test: boolean', '}', 'declare module \\'test/test\\' {', 'export * from \\'~test/test\\';', '}', '', 'declare module \\'~test/index\\' {', 'export * from \\'~test/test\\'', '}', 'declare module \\'test/index\\' {', 'export * from \\'~test/index\\';', '}', 'declare module \\'test\\' {', 'export * from \\'~test/index\\';', '}', ''].join('\\n'));\n        });\n    });\n    t.test('resolve files array', function (t) {\n        var FIXTURE_DIR = path_1.join(FIXTURES_DIR, 'compile-files-array');\n        var tree = {\n            src: path_1.join(FIXTURE_DIR, 'typings.json'),\n            raw: undefined,\n            postmessage: undefined,\n            global: false,\n            files: ['a.d.ts', 'b.d.ts'],\n            dependencies: {},\n            devDependencies: {},\n            peerDependencies: {},\n            globalDependencies: {},\n            globalDevDependencies: {}\n        };\n        var emitter = new events_1.EventEmitter();\n        return compile_1.compile(tree, ['main', 'browser'], { name: 'test', cwd: __dirname, global: false, meta: false, emitter: emitter }).then(function (out) {\n            t.equal(out.results.main, ['declare module \\'~test/a\\' {', 'export const a: boolean;', '}', 'declare module \\'test/a\\' {', 'export * from \\'~test/a\\';', '}', '', 'declare module \\'~test/b\\' {', 'export const b: boolean;', '}', 'declare module \\'test/b\\' {', 'export * from \\'~test/b\\';', '}', ''].join('\\n'));\n            t.equal(out.results.main, out.results.browser);\n        });\n    });\n});\n//# sourceMappingURL=compile.spec.js.map\n\n//# sourceMappingURL=compile.spec-compiled.js.map"]}